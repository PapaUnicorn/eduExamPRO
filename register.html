<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8"><title>Daftar eduExamPRO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>body { font-family: 'Inter', sans-serif; }</style>
</head>
<body class="bg-slate-50 min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-md bg-white p-8 rounded-3xl shadow-xl border border-slate-100">
        <div class="text-center mb-8">
            <h1 class="text-2xl font-bold text-indigo-700">eduExamPRO</h1>
            <p class="text-slate-500 text-sm">Buat akun untuk akses 1 tahun penuh</p>
        </div>
        <form onsubmit="handleRegister(event)" class="space-y-4">
            <input type="text" id="regNama" placeholder="Nama Lengkap" required class="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 transition-all text-sm">
            <input type="text" id="regUser" placeholder="Username" required class="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 transition-all text-sm">
            <input type="number" id="regWA" placeholder="Nomor WhatsApp (Contoh: 0812...)" required class="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 transition-all text-sm">
            <input type="email" id="regEmail" placeholder="Email" required class="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 transition-all text-sm">
            <div class="relative">
                <input type="password" id="regPass" placeholder="Password (Besar, Kecil, Angka, Simbol)" required oninput="checkStrength()" class="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 transition-all text-sm">
                <button type="button" onclick="const p=document.getElementById('regPass'); p.type=p.type==='password'?'text':'password'" class="absolute right-3 top-3 opacity-50">üëÅÔ∏è</button>
            </div>
            <input type="password" id="regPassConfirm" placeholder="Konfirmasi Password" required class="w-full border p-3 rounded-xl outline-none text-sm focus:ring-2 focus:ring-indigo-500 transition-all">
            <p id="passHint" class="text-[10px] italic font-medium"></p>
            <button type="submit" id="btn" class="w-full bg-indigo-600 text-white py-4 rounded-xl font-bold shadow-lg hover:bg-indigo-700 transition-colors">Daftar & Lanjut Pembayaran</button>
        </form>
    </div>

    <script>
        function checkStrength() {
            const pass = document.getElementById('regPass').value;
            const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
            const hint = document.getElementById('passHint');
            hint.innerText = regex.test(pass) ? "‚úÖ Password Aman" : "‚ùå Syarat: 8 Karakter, Huruf Besar, Kecil, Angka, & Simbol";
            hint.style.color = regex.test(pass) ? "#059669" : "#dc2626";
        }

        async function handleRegister(e) {
            e.preventDefault();
            const pass = document.getElementById('regPass').value;
            if (pass !== document.getElementById('regPassConfirm').value) return alert("Password konfirmasi tidak cocok!");
            
            const btn = document.getElementById('btn'); btn.innerText = "Mendaftarkan..."; btn.disabled = true;
            const rawWA = document.getElementById('regWA').value;
            const waLink = `https://wa.me/62${rawWA.replace(/^0+/, '').replace(/^62+/, '')}`;

            const data = { action: "register", nama: document.getElementById('regNama').value, username: document.getElementById('regUser').value, email: document.getElementById('regEmail').value, whatsapp: waLink, pass: pass };
            const scriptURL = 'https://script.google.com/macros/s/AKfycbzv4azWHXvtaX3n1fobQZr8WGzYQ_RhuP8Wda_wxavJ1uOafsKm267E3t-NPZ1E5G_j/exec';
            
            try {
                await fetch(scriptURL, { method: 'POST', body: JSON.stringify(data) });
                localStorage.setItem('userAccount', JSON.stringify({...data, isPaid: false, privilege: 'User'}));
                alert("Pendaftaran Berhasil! Silakan selesaikan aktivasi.");
                window.location.href = "payment.html";
            } catch (e) { alert("Sistem sedang sibuk. Coba lagi."); btn.innerText = "Daftar Sekarang"; btn.disabled = false; }
        }
    </script>
</body>
</html>